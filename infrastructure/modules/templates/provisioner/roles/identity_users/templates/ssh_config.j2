# SSH Client Configuration - Generated by Ansible
# {{ ansible_managed }}
# User: {{ item.username }}

# Default settings for all hosts
Host *
{% if item.ssh_client_config is defined %}
    StrictHostKeyChecking {{ 'yes' if item.ssh_client_config.strict_host_key_checking | default(true) else 'no' }}
    UserKnownHostsFile {{ item.ssh_client_config.user_known_hosts_file | default('~/.ssh/known_hosts') }}
    PasswordAuthentication {{ 'yes' if item.ssh_client_config.pass_authentication | default(true) else 'no' }}
    PubkeyAuthentication {{ 'yes' if item.ssh_client_config.pubkey_authentication | default(true) else 'no' }}
    IdentitiesOnly {{ 'yes' if item.ssh_client_config.identities_only | default(false) else 'no' }}
    LogLevel {{ item.ssh_client_config.log_level | default('INFO') }}
    ServerAliveInterval {{ item.ssh_client_config.server_alive_interval | default(60) }}
    ServerAliveCountMax {{ item.ssh_client_config.server_alive_count_max | default(3) }}
    ConnectTimeout {{ item.ssh_client_config.connect_timeout | default(10) }}
{% else %}
    StrictHostKeyChecking yes
    UserKnownHostsFile ~/.ssh/known_hosts
    PasswordAuthentication yes
    PubkeyAuthentication yes
    IdentitiesOnly no
    LogLevel INFO
    ServerAliveInterval 60
    ServerAliveCountMax 3
    ConnectTimeout 10
{% endif %}

    # Basic security
    Protocol 2
    ForwardAgent no
    ForwardX11 no

# Localhost (testing)
Host localhost 127.0.0.1
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
