---
- name: Configure /etc/hosts with all cluster nodes (private IPs)
  blockinfile:
    path: /etc/hosts
    block: |
      {% for host in groups['all'] %}
      {{ hostvars[host]['private_ip'] }} {{ host }}
      {% endfor %}
    marker: "# {mark} ANSIBLE MANAGED BLOCK - CLUSTER NODES"
