---
# Infisical Bootstrap Secrets Template
# This file contains ALL secret environment variables for Infisical
#
# INSTRUCTIONS:
# 1. Fill in the PLACEHOLDER values below with actual secrets
# 2. Generate required secrets using the commands provided
# 3. Seal this file using kubeseal (see below)
# 4. Commit the SEALED version to Git (NOT this raw file!)
#
# NEVER commit this file with real secrets to Git!

apiVersion: v1
kind: Secret
metadata:
  name: infisical-secrets
  namespace: infisical
  labels:
    app.kubernetes.io/name: infisical
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  # ============================================================================
  # REQUIRED CORE SECRETS (Must be generated first!)
  # ============================================================================

  # CRITICAL: Generate these before filling anything else
  # Run: openssl rand -hex 16
  ENCRYPTION_KEY: "PLACEHOLDER_RUN_openssl_rand_hex_16"

  # Run: openssl rand -base64 32
  AUTH_SECRET: "PLACEHOLDER_RUN_openssl_rand_base64_32"

  # ============================================================================
  # DATABASE CONFIGURATION (PostgreSQL)
  # ============================================================================

  # Primary Database Connection
  # Format: postgresql://username:password@host:port/database?sslmode=require
  # Internal DNS (recommended for in-cluster):
  DB_CONNECTION_URI: "postgresql://infisical_user:h07ENxJtKWqaqNd6lLEuK3dMtfB5fXhlL9tjdN70MHYjf0c0yD3v05NbxYUG5bB3@platform-db-cluster.platform-db-pg.svc.cluster.local:5432/infisical?sslmode=require"

  # Alternative: External DNS (if you fix the domain to pnats.cloud):
  # DB_CONNECTION_URI: "postgresql://infisical_user:PASSWORD@platform-db.pnats.cloud:5432/infisical?sslmode=require"

  # Optional: SSL Certificate for PostgreSQL (base64-encoded PEM)
  # Leave empty if using sslmode=require without custom CA
  DB_ROOT_CERT: ""

  # Optional: Read Replicas (JSON array)
  # Format: [{"dbConnectionUri":"postgresql://...","dbRootCert":"base64cert"}]
  DB_READ_REPLICAS: '[{"dbConnectionUri":"postgresql://infisical_user:h07ENxJtKWqaqNd6lLEuK3dMtfB5fXhlL9tjdN70MHYjf0c0yD3v05NbxYUG5bB3@platform-db-cluster-repl.platform-db-pg.svc.cluster.local:5432/infisical?sslmode=require"}]'

  # ============================================================================
  # REDIS CONFIGURATION
  # ============================================================================

  # Redis Sentinel Configuration (RECOMMENDED for HA)
  # Comma-separated list of sentinel hosts
  REDIS_SENTINEL_HOSTS: "platform-kv-sentinel-sentinel.platform-kv-redis-cluster.svc.cluster.local:26379"

  # Sentinel master name (from platform-kv-sentinel.yaml)
  REDIS_SENTINEL_MASTER_NAME: "platform-kv-master"

  # Optional: Redis password (if configured)
  REDIS_SENTINEL_PASSWORD: ""

  # Optional: Enable TLS for Redis Sentinel
  REDIS_SENTINEL_ENABLE_TLS: "false"

  # ============================================================================
  # PLATFORM CONFIGURATION
  # ============================================================================

  # Public URL where Infisical will be accessible
  # Format: https://your-domain.com (NO trailing slash)
  SITE_URL: "PLACEHOLDER_https://infisical.pnats.cloud"

  # Bind address (use 0.0.0.0 to accept external connections)
  HOST: "0.0.0.0"

  # Internal port (default: 8080)
  PORT: "8080"

  # CORS origins (comma-separated, or * for all)
  CORS_ALLOWED_ORIGINS: "https://infisical.pnats.cloud"

  # ============================================================================
  # SMTP EMAIL CONFIGURATION
  # ============================================================================

  # SMTP Server Configuration
  SMTP_HOST: "PLACEHOLDER_smtp.example.com"
  SMTP_PORT: "587"
  SMTP_USERNAME: "PLACEHOLDER_your_smtp_username"
  SMTP_PASSWORD: "PLACEHOLDER_your_smtp_password"

  # Email Sender Information
  SMTP_FROM_ADDRESS: "PLACEHOLDER_noreply@pnats.cloud"
  SMTP_FROM_NAME: "Infisical Platform"

  # TLS Configuration
  SMTP_REQUIRE_TLS: "true"
  SMTP_TLS_REJECT_UNAUTHORIZED: "true"

  # Optional: Custom CA Certificate for SMTP (base64-encoded PEM)
  SMTP_CUSTOM_CA_CERT: ""

  # ============================================================================
  # AUTHENTICATION - GitHub SSO
  # ============================================================================

  # GitHub OAuth Application
  # Create at: https://github.com/settings/developers
  # Callback URL: https://infisical.pnats.cloud/api/v1/sso/github/callback
  CLIENT_ID_GITHUB_LOGIN: "PLACEHOLDER_github_oauth_client_id"
  CLIENT_SECRET_GITHUB_LOGIN: "PLACEHOLDER_github_oauth_client_secret"

  # ============================================================================
  # AUTHENTICATION - Google SSO (Optional)
  # ============================================================================

  CLIENT_ID_GOOGLE_LOGIN: "PLACEHOLDER_google_oauth_client_id"
  CLIENT_SECRET_GOOGLE_LOGIN: "PLACEHOLDER_google_oauth_client_secret"

  # ============================================================================
  # AUTHENTICATION - GitLab SSO (Optional)
  # ============================================================================

  CLIENT_ID_GITLAB_LOGIN: "PLACEHOLDER_gitlab_oauth_client_id"
  CLIENT_SECRET_GITLAB_LOGIN: "PLACEHOLDER_gitlab_oauth_client_secret"
  URL_GITLAB_LOGIN: "https://gitlab.com"

  # ============================================================================
  # SAML CONFIGURATION (Enterprise)
  # ============================================================================

  SAML_ORG_SLUG: "PLACEHOLDER_your_org_slug"

  # ============================================================================
  # APP CONNECTIONS - GitHub App Integration
  # ============================================================================

  GITHUB_APP_ID: "PLACEHOLDER_github_app_id"
  GITHUB_APP_SLUG: "PLACEHOLDER_github_app_slug"
  GITHUB_APP_CLIENT_ID: "PLACEHOLDER_github_app_client_id"
  GITHUB_APP_CLIENT_SECRET: "PLACEHOLDER_github_app_client_secret"
  GITHUB_APP_PRIVATE_KEY: "PLACEHOLDER_github_app_private_key_pem"

  # ============================================================================
  # APP CONNECTIONS - GitLab Integration
  # ============================================================================

  GITLAB_APP_CLIENT_ID: "PLACEHOLDER_gitlab_app_client_id"
  GITLAB_APP_CLIENT_SECRET: "PLACEHOLDER_gitlab_app_client_secret"

  # ============================================================================
  # APP CONNECTIONS - Heroku Integration
  # ============================================================================

  HEROKU_APP_CLIENT_ID: "PLACEHOLDER_heroku_oauth_client_id"
  HEROKU_APP_CLIENT_SECRET: "PLACEHOLDER_heroku_oauth_client_secret"

  # ============================================================================
  # NATIVE INTEGRATIONS - AWS
  # ============================================================================

  AWS_INTEGRATION_ACCESS_KEY_ID: "PLACEHOLDER_aws_access_key_id"
  AWS_INTEGRATION_SECRET_ACCESS_KEY: "PLACEHOLDER_aws_secret_access_key"

  # ============================================================================
  # NATIVE INTEGRATIONS - GitHub Secrets
  # ============================================================================

  INTEGRATION_GITHUB_CLIENT_ID: "PLACEHOLDER_github_integration_client_id"
  INTEGRATION_GITHUB_CLIENT_SECRET: "PLACEHOLDER_github_integration_client_secret"

  # ============================================================================
  # NATIVE INTEGRATIONS - Vercel
  # ============================================================================

  INTEGRATION_VERCEL_CLIENT_ID: "PLACEHOLDER_vercel_client_id"
  INTEGRATION_VERCEL_CLIENT_SECRET: "PLACEHOLDER_vercel_client_secret"

  # ============================================================================
  # NATIVE INTEGRATIONS - Netlify
  # ============================================================================

  INTEGRATION_NETLIFY_CLIENT_ID: "PLACEHOLDER_netlify_client_id"
  INTEGRATION_NETLIFY_CLIENT_SECRET: "PLACEHOLDER_netlify_client_secret"

  # ============================================================================
  # NATIVE INTEGRATIONS - Bitbucket
  # ============================================================================

  INTEGRATION_BITBUCKET_CLIENT_ID: "PLACEHOLDER_bitbucket_client_id"
  INTEGRATION_BITBUCKET_CLIENT_SECRET: "PLACEHOLDER_bitbucket_client_secret"

  # ============================================================================
  # SECRET SCANNING - GitHub Radar
  # ============================================================================

  GITHUB_RADAR_APP_ID: "PLACEHOLDER_github_radar_app_id"
  GITHUB_RADAR_APP_SLUG: "PLACEHOLDER_github_radar_app_slug"
  GITHUB_RADAR_APP_CLIENT_ID: "PLACEHOLDER_github_radar_client_id"
  GITHUB_RADAR_APP_CLIENT_SECRET: "PLACEHOLDER_github_radar_client_secret"
  GITHUB_RADAR_APP_PRIVATE_KEY: "PLACEHOLDER_github_radar_private_key_pem"
  GITHUB_RADAR_APP_WEBHOOK_SECRET: "PLACEHOLDER_github_radar_webhook_secret"

  # ============================================================================
  # OBSERVABILITY - OpenTelemetry
  # ============================================================================

  OTEL_TELEMETRY_COLLECTION_ENABLED: "false"
  OTEL_EXPORT_TYPE: "prometheus"
  OTEL_EXPORT_OTLP_ENDPOINT: ""
  OTEL_EXPORT_OTLP_USERNAME: ""
  OTEL_EXPORT_OTLP_PASSWORD: ""

  # ============================================================================
  # SECURITY & ADVANCED CONFIGURATION
  # ============================================================================

  ALLOW_INTERNAL_IP_CONNECTIONS: "true"
  KUBERNETES_AUTO_FETCH_SERVICE_ACCOUNT_TOKEN: "true"
  DISABLE_AUDIT_LOG_STORAGE: "false"
