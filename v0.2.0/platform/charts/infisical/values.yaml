---
# Infisical Helm Chart Values
# Chart: https://dl.cloudsmith.io/public/infisical/helm-charts/helm/charts
# Version: 0.4.2

## Backend configuration
backend:
  enabled: true
  name: backend
  fullnameOverride: "infisical-backend"

  # Pod configuration
  podAnnotations: {}
  deploymentAnnotations: {}
  replicaCount: 2

  # Image configuration
  image:
    repository: infisical/infisical
    tag: "v0.151.0"
    pullPolicy: IfNotPresent

  # Resource placement
  affinity: {}
  tolerations: []
  nodeSelector: {}

  # Reference to Kubernetes secret containing environment variables
  kubeSecretRef: "infisical-secrets"

  # Service configuration
  service:
    annotations: {}
    type: ClusterIP
    port: 8080

  # Resource limits
  resources:
    limits:
      memory: "1000Mi"
    requests:
      cpu: "350m"
      memory: "512Mi"

# Ingress configuration
ingress:
  enabled: true
  hostName: "secrets.pnats.cloud"
  ingressClassName: nginx
  nginx:
    # Disable bundled ingress-nginx (use existing cluster-wide ingress-nginx)
    enabled: false
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-production
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
  tls:
  - secretName: infisical-tls
    hosts:
    - "secrets.pnats.cloud"

# MongoDB configuration - DISABLED (using external PostgreSQL instead)
mongodb:
  enabled: false

# PostgreSQL configuration - DISABLED (using external platform-db-cluster)
postgresql:
  enabled: true

# Redis configuration - DISABLED (using external platform-kv)
redis:
  enabled: true
