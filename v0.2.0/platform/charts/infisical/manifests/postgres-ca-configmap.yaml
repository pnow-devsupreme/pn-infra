---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-ca-cert
  namespace: infisical
  annotations:
    argocd.argoproj.io/sync-wave: "-2"
    # Prevent ArgoCD from pruning this ConfigMap (dynamically managed by cert-sync job)
    argocd.argoproj.io/sync-options: Prune=false
    # Ignore differences in the data field (updated by cert-sync job)
    argocd.argoproj.io/compare-options: IgnoreExtraneous
data:
  ca.crt: |
    # This will be populated by the cert-sync job
    # The job extracts the certificate from platform-db-cluster-0
    # and updates this ConfigMap with the actual certificate content
