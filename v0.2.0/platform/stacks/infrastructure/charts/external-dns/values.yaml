---
# External-DNS Helm Chart Values
# https://github.com/kubernetes-sigs/external-dns/tree/master/charts/external-dns

# Common annotations - informational metadata (not used for selection)
commonAnnotations:
  platform.pnats.cloud/owner: 'Shaik Noorullah'
  platform.pnats.cloud/owner-email: 'snoorullah@proficientnowtech.com'
  platform.pnats.cloud/docs: 'docs.pnats.cloud/platform-infra/external-dns'
  platform.pnats.cloud/git-commit: HEAD
  platform.pnats.cloud/release-id: manual-deploy

# Common labels - applied to all resources (valid label values only)
commonLabels:
  platform.pnats.cloud/org: ProficientNowTech
  platform.pnats.cloud/chart-version: { ? { .Chart.Version } }
  platform.pnats.cloud/maintained-by: platform-team

# Common selectors - used for selecting/matching resources
commonSelectors:
  app.kubernetes.io/part-of: platform-core
  app.kubernetes.io/managed-by: argocd
  app.kubernetes.io/version: { ? { .Chart.AppVersion } }
  platform.pnats.cloud/layer: infrastructure
  platform.pnats.cloud/environment: production
  platform.pnats.cloud/tier: high
  platform.pnats.cloud/team: platform-team
  platform.pnats.cloud/monitoring-enabled: "true"
  platform.pnats.cloud/backup-policy: none
  platform.pnats.cloud/cost-center: platform-ops

external-dns:
  # Provider configuration
  provider: cloudflare

  # Sources to monitor
  sources:
  - ingress
  - service
  # Domain filter
  domainFilters:
  - pnats.cloud
  # Policy
  policy: sync

  # TXT owner ID
  txtOwnerId: external-dns-pnats

  # Cloudflare configuration
  env:
  - name: CF_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: cloudflare-api-token
        key: api-token
  # Deployment configuration
  replicas: 2

  # Resource configuration
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # Operational configuration
  interval: 1m
  logLevel: info
  logFormat: text

  # Metrics
  serviceMonitor:
    enabled: true
